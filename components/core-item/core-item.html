<!--
Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<!--
@group Polymer Core Elements

core-item is a simple line-item object: a label and/or an icon that can also act as a link.

Example:

     <core-item icon="settings" label="Settings"></core-item>

@element core-item
-->

<link rel="import" href="../core-icon/core-icon.html">

<polymer-element name="core-item" extends="core-theme-aware" attributes="src label icon item href">
<template>

  <link rel="stylesheet" href="core-item.css">

  <core-icon src="{{src}}" icon="{{icon}}" showing?="{{icon || src}}"></core-icon>
  <span id="label">{{label}}<content></content></span>
  <a id="link" href="{{href}}" hidden?="{{!href}}"></a>

</template>
<script>

  Polymer('core-item', {
    /**
      * The URL of an image for the icon.
      *
      * @attribute src
      * @type string
      * @default ''
      */

    /**
      * Specifies the icon from the Polymer icon set.
      *
      * @attribute icon
      * @type string
      * @default ''
      */

    /**
      * Specifies a link target.
      *
      * Example:
      *
      *     <core-item icon="favorite" label="Favorite" href="http://www.polymer-project.org/"></core-item>
      *
      * If you want more control on the link, e.g. specify the target for where to
      * open the linked document, you can put &lt;a> directly inside the item.
      *
      * Example:
      *
      *     <core-item icon="favorite" label="Favorite">
      *       <a href="http://www.polymer-project.org/" target="_self"></a>
      *     </core-item>
      *
      * @attribute href
      * @type string
      * @default ''
      */

    /**
      * Specifies the label for the menu item.
      *
      * @attribute label
      * @type string
      * @default ''
      */
    label: '',

    // calc item's offset middle pos instead of using offsetTop/Height 
    // directly which requires to wait for submenu's collapsing transition to 
    // complete first before it can return the correct pos.
    getOffsetMiddle: function() {
      var p = this.parentNode;
      if (p) {
        var i = Array.prototype.indexOf.call(p.items, this);
        var h = this.getItemHeight();
        return i * h + h/2 + p.items[0].offsetTop;
      }
    },

    getItemHeight: function() {
      return this.offsetHeight;
    }

  });

</script>
</polymer-element>
